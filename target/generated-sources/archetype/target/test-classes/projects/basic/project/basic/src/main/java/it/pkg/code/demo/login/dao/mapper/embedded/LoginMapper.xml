<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="it.pkg.code.demo.login.dao.LoginDao">

    <update id="createUsers">
        CREATE TABLE h_users
        (
            id         BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 4) PRIMARY KEY,
            app        varchar(255) NOT NULL,
            username   VARCHAR(255) NOT NULL UNIQUE,
            password   VARCHAR(255) NOT NULL,
            role_id    NUMERIC(10),
            created_at NUMERIC(20),
            updated_at NUMERIC(20),
            UNIQUE (app, username)
        )
    </update>

    <update id="createRoles">
        CREATE TABLE h_roles
        (
            id          BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 4) PRIMARY KEY,
            app         varchar(255) NOT NULL,
            name        VARCHAR(255) NOT NULL,
            description VARCHAR(500),
            created_at  NUMERIC(20),
            updated_at  NUMERIC(20),
            UNIQUE (app, name)
        )
    </update>

    <update id="createMenus">
        CREATE TABLE h_menus
        (
            id          BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 5) PRIMARY KEY,
            app         varchar(255) NOT NULL,
            name        VARCHAR(255) NOT NULL,
            url         VARCHAR(255),
            parent_id   NUMERIC(10)  DEFAULT 0,
            menu_level  NUMERIC(2)   DEFAULT 1,
            order_index NUMERIC(10)  DEFAULT 0,
            icon_name   varchar(255) DEFAULT 'LogIcon',
            created_at  NUMERIC(20),
            updated_at  NUMERIC(20),
            UNIQUE (app, url)
        )
    </update>

    <update id="createRoleMenus">
        CREATE TABLE h_role_menus
        (
            app     varchar(255) NOT NULL,
            role_id INT          NOT NULL,
            menu_id INT          NOT NULL,
            primary key (app, role_id, menu_id)
        )
    </update>
</mapper>